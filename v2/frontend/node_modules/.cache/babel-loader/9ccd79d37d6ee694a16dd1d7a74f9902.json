{"ast":null,"code":"export class API {\n  constructor(id, path) {\n    this.mockedStatus = localStorage.getItem('mockedStatus');\n    this.apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n    this.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n    this.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n    this.datas = [];\n  }\n\n  getDatas() {\n    this.datas = [{\n      loading: true,\n      error: null,\n      errorMessage: ''\n    }];\n    if (!this.url) return;\n    this.loading = true;\n\n    const fetchData = async () => {\n      try {\n        const response = await fetch(this.url);\n        const json = await response.json();\n        let datas = json.data;\n        this.datas = [{\n          loading: false,\n          error: false,\n          errorMessage: '',\n          datas: datas\n        }];\n        return this.datas;\n      } catch (error) {\n        this.error = true;\n        this.errorMessage = error;\n      } finally {\n        this.loading = false;\n      }\n    };\n\n    fetchData();\n    return [this.datas, {\n      loading: this.loading\n    }, {\n      error: this.error\n    }, {\n      errorMessage: this.errorMessage\n    }];\n  }\n\n}","map":{"version":3,"names":["API","constructor","id","path","mockedStatus","localStorage","getItem","apiUrl","undefined","mockedUrl","url","datas","getDatas","loading","error","errorMessage","fetchData","response","fetch","json","data"],"sources":["/Users/sebastien/Sebbe's Cloud/School/OpenClassRooms/2 - OCR - Software Developper - JS & React/Projet 12 (60h)/P12 - Mission/00Code/frontend/src/API/api.js"],"sourcesContent":["export class API {\n\tconstructor(id, path) {\n\t\tthis.mockedStatus = localStorage.getItem('mockedStatus');\n\t\tthis.apiUrl =\n\t\t\tpath === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n\t\tthis.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n\t\tthis.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n\t\tthis.datas = [];\n\t}\n\n\tgetDatas() {\n\t\tthis.datas = [\n\t\t\t{\n\t\t\t\tloading: true,\n\t\t\t\terror: null,\n\t\t\t\terrorMessage: '',\n\t\t\t},\n\t\t];\n\n\t\tif (!this.url) return;\n\n\t\tthis.loading = true;\n\n\t\tconst fetchData = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(this.url);\n\t\t\t\tconst json = await response.json();\n\t\t\t\tlet datas = json.data;\n\t\t\t\tthis.datas = [\n\t\t\t\t\t{\n\t\t\t\t\t\tloading: false,\n\t\t\t\t\t\terror: false,\n\t\t\t\t\t\terrorMessage: '',\n\t\t\t\t\t\tdatas: datas,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t\treturn this.datas;\n\t\t\t} catch (error) {\n\t\t\t\tthis.error = true;\n\t\t\t\tthis.errorMessage = error;\n\t\t\t} finally {\n\t\t\t\tthis.loading = false;\n\t\t\t}\n\t\t};\n\t\tfetchData();\n\t\treturn [this.datas, { loading: this.loading }, { error: this.error }, { errorMessage: this.errorMessage }];\n\t}\n}\n"],"mappings":"AAAA,OAAO,MAAMA,GAAN,CAAU;EAChBC,WAAW,CAACC,EAAD,EAAKC,IAAL,EAAW;IACrB,KAAKC,YAAL,GAAoBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB;IACA,KAAKC,MAAL,GACCJ,IAAI,KAAKK,SAAT,GAAsB,8BAA6BN,EAAG,EAAtD,GAA2D,8BAA6BA,EAAG,IAAGC,IAAK,EADpG;IAEA,KAAKM,SAAL,GAAiBN,IAAI,KAAKK,SAAT,GAAsB,cAAaN,EAAG,aAAtC,GAAsD,cAAaA,EAAG,IAAGC,IAAK,aAA/F;IACA,KAAKO,GAAL,GAAW,KAAKN,YAAL,KAAsB,MAAtB,GAA+B,KAAKK,SAApC,GAAgD,KAAKF,MAAhE;IACA,KAAKI,KAAL,GAAa,EAAb;EACA;;EAEDC,QAAQ,GAAG;IACV,KAAKD,KAAL,GAAa,CACZ;MACCE,OAAO,EAAE,IADV;MAECC,KAAK,EAAE,IAFR;MAGCC,YAAY,EAAE;IAHf,CADY,CAAb;IAQA,IAAI,CAAC,KAAKL,GAAV,EAAe;IAEf,KAAKG,OAAL,GAAe,IAAf;;IAEA,MAAMG,SAAS,GAAG,YAAY;MAC7B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,KAAKR,GAAN,CAA5B;QACA,MAAMS,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAnB;QACA,IAAIR,KAAK,GAAGQ,IAAI,CAACC,IAAjB;QACA,KAAKT,KAAL,GAAa,CACZ;UACCE,OAAO,EAAE,KADV;UAECC,KAAK,EAAE,KAFR;UAGCC,YAAY,EAAE,EAHf;UAICJ,KAAK,EAAEA;QAJR,CADY,CAAb;QAQA,OAAO,KAAKA,KAAZ;MACA,CAbD,CAaE,OAAOG,KAAP,EAAc;QACf,KAAKA,KAAL,GAAa,IAAb;QACA,KAAKC,YAAL,GAAoBD,KAApB;MACA,CAhBD,SAgBU;QACT,KAAKD,OAAL,GAAe,KAAf;MACA;IACD,CApBD;;IAqBAG,SAAS;IACT,OAAO,CAAC,KAAKL,KAAN,EAAa;MAAEE,OAAO,EAAE,KAAKA;IAAhB,CAAb,EAAwC;MAAEC,KAAK,EAAE,KAAKA;IAAd,CAAxC,EAA+D;MAAEC,YAAY,EAAE,KAAKA;IAArB,CAA/D,CAAP;EACA;;AA9Ce"},"metadata":{},"sourceType":"module"}