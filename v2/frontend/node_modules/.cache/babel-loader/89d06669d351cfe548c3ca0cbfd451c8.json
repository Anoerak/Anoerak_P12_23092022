{"ast":null,"code":"export class API {\n  constructor(id, path) {\n    this.mockedStatus = localStorage.getItem('mockedStatus');\n    this.apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n    this.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n    this.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n    this.datas = [];\n    this.loading = false;\n    this.error = false;\n    this.errorMessage = '';\n  }\n\n  getDatas() {\n    if (!this.url) return;\n    this.loading = true;\n    return async () => {\n      try {\n        const response = await fetch(this.url, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json'\n          }\n        });\n        const data = await response.json();\n        console.log(data.data);\n        this.loading = false;\n        this.error = false;\n        this.errorMessage = '';\n        this.datas.push(await data.data, this.loading, this.error, this.errorMessage);\n        return this.datas;\n      } catch (error) {\n        this.loading = false;\n        this.error = true;\n        this.errorMessage = error;\n        this.datas.push(this.datas, this.loading, this.error, this.errorMessage);\n      }\n    };\n  }\n\n}","map":{"version":3,"names":["API","constructor","id","path","mockedStatus","localStorage","getItem","apiUrl","undefined","mockedUrl","url","datas","loading","error","errorMessage","getDatas","response","fetch","method","headers","Accept","data","json","console","log","push"],"sources":["/Users/sebastien/Sebbe's Cloud/School/OpenClassRooms/2 - OCR - Software Developper - JS & React/Projet 12 (60h)/P12 - Mission/00Code/frontend/src/API/api.js"],"sourcesContent":["export class API {\n\tconstructor(id, path) {\n\t\tthis.mockedStatus = localStorage.getItem('mockedStatus');\n\t\tthis.apiUrl =\n\t\t\tpath === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n\t\tthis.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n\t\tthis.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n\t\tthis.datas = [];\n\t\tthis.loading = false;\n\t\tthis.error = false;\n\t\tthis.errorMessage = '';\n\t}\n\n\tgetDatas() {\n\t\tif (!this.url) return;\n\n\t\tthis.loading = true;\n\n\t\treturn async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(this.url, {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst data = await response.json();\n\t\t\t\tconsole.log(data.data);\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.error = false;\n\t\t\t\tthis.errorMessage = '';\n\t\t\t\tthis.datas.push(await data.data, this.loading, this.error, this.errorMessage);\n\t\t\t\treturn this.datas;\n\t\t\t} catch (error) {\n\t\t\t\tthis.loading = false;\n\t\t\t\tthis.error = true;\n\t\t\t\tthis.errorMessage = error;\n\t\t\t\tthis.datas.push(this.datas, this.loading, this.error, this.errorMessage);\n\t\t\t}\n\t\t};\n\t}\n}\n"],"mappings":"AAAA,OAAO,MAAMA,GAAN,CAAU;EAChBC,WAAW,CAACC,EAAD,EAAKC,IAAL,EAAW;IACrB,KAAKC,YAAL,GAAoBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB;IACA,KAAKC,MAAL,GACCJ,IAAI,KAAKK,SAAT,GAAsB,8BAA6BN,EAAG,EAAtD,GAA2D,8BAA6BA,EAAG,IAAGC,IAAK,EADpG;IAEA,KAAKM,SAAL,GAAiBN,IAAI,KAAKK,SAAT,GAAsB,cAAaN,EAAG,aAAtC,GAAsD,cAAaA,EAAG,IAAGC,IAAK,aAA/F;IACA,KAAKO,GAAL,GAAW,KAAKN,YAAL,KAAsB,MAAtB,GAA+B,KAAKK,SAApC,GAAgD,KAAKF,MAAhE;IACA,KAAKI,KAAL,GAAa,EAAb;IACA,KAAKC,OAAL,GAAe,KAAf;IACA,KAAKC,KAAL,GAAa,KAAb;IACA,KAAKC,YAAL,GAAoB,EAApB;EACA;;EAEDC,QAAQ,GAAG;IACV,IAAI,CAAC,KAAKL,GAAV,EAAe;IAEf,KAAKE,OAAL,GAAe,IAAf;IAEA,OAAO,YAAY;MAClB,IAAI;QACH,MAAMI,QAAQ,GAAG,MAAMC,KAAK,CAAC,KAAKP,GAAN,EAAW;UACtCQ,MAAM,EAAE,KAD8B;UAEtCC,OAAO,EAAE;YACR,gBAAgB,kBADR;YAERC,MAAM,EAAE;UAFA;QAF6B,CAAX,CAA5B;QAOA,MAAMC,IAAI,GAAG,MAAML,QAAQ,CAACM,IAAT,EAAnB;QACAC,OAAO,CAACC,GAAR,CAAYH,IAAI,CAACA,IAAjB;QACA,KAAKT,OAAL,GAAe,KAAf;QACA,KAAKC,KAAL,GAAa,KAAb;QACA,KAAKC,YAAL,GAAoB,EAApB;QACA,KAAKH,KAAL,CAAWc,IAAX,CAAgB,MAAMJ,IAAI,CAACA,IAA3B,EAAiC,KAAKT,OAAtC,EAA+C,KAAKC,KAApD,EAA2D,KAAKC,YAAhE;QACA,OAAO,KAAKH,KAAZ;MACA,CAfD,CAeE,OAAOE,KAAP,EAAc;QACf,KAAKD,OAAL,GAAe,KAAf;QACA,KAAKC,KAAL,GAAa,IAAb;QACA,KAAKC,YAAL,GAAoBD,KAApB;QACA,KAAKF,KAAL,CAAWc,IAAX,CAAgB,KAAKd,KAArB,EAA4B,KAAKC,OAAjC,EAA0C,KAAKC,KAA/C,EAAsD,KAAKC,YAA3D;MACA;IACD,CAtBD;EAuBA;;AAzCe"},"metadata":{},"sourceType":"module"}