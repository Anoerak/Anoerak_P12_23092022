{"ast":null,"code":"export class API {\n  constructor(id, path) {\n    this.mockedStatus = localStorage.getItem('mockedStatus');\n    this.apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n    this.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n    this.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n  }\n\n  useFetch() {\n    this.datas = [];\n    if (!this.url) return;\n\n    const fetchData = async () => {\n      this.loading = true;\n      this.error = false;\n      this.errorMessage = '';\n      fetch(this.url).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error('Something went wrong ...');\n        }\n      }).then(data => {\n        this.datas = data.data;\n        this.loading = false;\n      }).catch(error => {\n        this.error = true;\n        this.errorMessage = error.message;\n        this.loading = false;\n      });\n    };\n\n    let datas = fetchData();\n    console.log(datas);\n    return datas; // try {\n    // \tconst response = await fetch(this.url);\n    // \tconst json = await response.json();\n    // \tlet datas = json.data;\n    // \tthis.loading = false;\n    // \tthis.error = false;\n    // \tthis.errorMessage = '';\n    // \tthis.datas.push(datas);\n    // } catch (error) {\n    // \tthis.error = true;\n    // \tthis.errorMessage = error;\n    // } finally {\n    // \tthis.loading = false;\n    // }\n    // };\n    // return fetchData();\n    // fetchData();\n    // return [this.datas, this.loading, this.error, this.errorMessage];\n  }\n\n}","map":{"version":3,"names":["API","constructor","id","path","mockedStatus","localStorage","getItem","apiUrl","undefined","mockedUrl","url","useFetch","datas","fetchData","loading","error","errorMessage","fetch","then","response","ok","json","Error","data","catch","message","console","log"],"sources":["/Users/sebastien/Sebbe's Cloud/School/OpenClassRooms/2 - OCR - Software Developper - JS & React/Projet 12 (60h)/P12 - Mission/00Code/frontend/src/API/api.js"],"sourcesContent":["export class API {\n\tconstructor(id, path) {\n\t\tthis.mockedStatus = localStorage.getItem('mockedStatus');\n\t\tthis.apiUrl =\n\t\t\tpath === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n\t\tthis.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n\t\tthis.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n\t}\n\n\tuseFetch() {\n\t\tthis.datas = [];\n\n\t\tif (!this.url) return;\n\n\t\tconst fetchData = async () => {\n\t\t\tthis.loading = true;\n\t\t\tthis.error = false;\n\t\t\tthis.errorMessage = '';\n\t\t\tfetch(this.url)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif (response.ok) {\n\t\t\t\t\t\treturn response.json();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('Something went wrong ...');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((data) => {\n\t\t\t\t\tthis.datas = data.data;\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tthis.error = true;\n\t\t\t\t\tthis.errorMessage = error.message;\n\t\t\t\t\tthis.loading = false;\n\t\t\t\t});\n\t\t};\n\t\tlet datas = fetchData();\n\t\tconsole.log(datas);\n\t\treturn datas;\n\n\t\t// try {\n\t\t// \tconst response = await fetch(this.url);\n\t\t// \tconst json = await response.json();\n\t\t// \tlet datas = json.data;\n\t\t// \tthis.loading = false;\n\t\t// \tthis.error = false;\n\t\t// \tthis.errorMessage = '';\n\t\t// \tthis.datas.push(datas);\n\t\t// } catch (error) {\n\t\t// \tthis.error = true;\n\t\t// \tthis.errorMessage = error;\n\t\t// } finally {\n\t\t// \tthis.loading = false;\n\t\t// }\n\t\t// };\n\t\t// return fetchData();\n\t\t// fetchData();\n\t\t// return [this.datas, this.loading, this.error, this.errorMessage];\n\t}\n}\n"],"mappings":"AAAA,OAAO,MAAMA,GAAN,CAAU;EAChBC,WAAW,CAACC,EAAD,EAAKC,IAAL,EAAW;IACrB,KAAKC,YAAL,GAAoBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB;IACA,KAAKC,MAAL,GACCJ,IAAI,KAAKK,SAAT,GAAsB,8BAA6BN,EAAG,EAAtD,GAA2D,8BAA6BA,EAAG,IAAGC,IAAK,EADpG;IAEA,KAAKM,SAAL,GAAiBN,IAAI,KAAKK,SAAT,GAAsB,cAAaN,EAAG,aAAtC,GAAsD,cAAaA,EAAG,IAAGC,IAAK,aAA/F;IACA,KAAKO,GAAL,GAAW,KAAKN,YAAL,KAAsB,MAAtB,GAA+B,KAAKK,SAApC,GAAgD,KAAKF,MAAhE;EACA;;EAEDI,QAAQ,GAAG;IACV,KAAKC,KAAL,GAAa,EAAb;IAEA,IAAI,CAAC,KAAKF,GAAV,EAAe;;IAEf,MAAMG,SAAS,GAAG,YAAY;MAC7B,KAAKC,OAAL,GAAe,IAAf;MACA,KAAKC,KAAL,GAAa,KAAb;MACA,KAAKC,YAAL,GAAoB,EAApB;MACAC,KAAK,CAAC,KAAKP,GAAN,CAAL,CACEQ,IADF,CACQC,QAAD,IAAc;QACnB,IAAIA,QAAQ,CAACC,EAAb,EAAiB;UAChB,OAAOD,QAAQ,CAACE,IAAT,EAAP;QACA,CAFD,MAEO;UACN,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;QACA;MACD,CAPF,EAQEJ,IARF,CAQQK,IAAD,IAAU;QACf,KAAKX,KAAL,GAAaW,IAAI,CAACA,IAAlB;QACA,KAAKT,OAAL,GAAe,KAAf;MACA,CAXF,EAYEU,KAZF,CAYST,KAAD,IAAW;QACjB,KAAKA,KAAL,GAAa,IAAb;QACA,KAAKC,YAAL,GAAoBD,KAAK,CAACU,OAA1B;QACA,KAAKX,OAAL,GAAe,KAAf;MACA,CAhBF;IAiBA,CArBD;;IAsBA,IAAIF,KAAK,GAAGC,SAAS,EAArB;IACAa,OAAO,CAACC,GAAR,CAAYf,KAAZ;IACA,OAAOA,KAAP,CA7BU,CA+BV;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;AA1De"},"metadata":{},"sourceType":"module"}