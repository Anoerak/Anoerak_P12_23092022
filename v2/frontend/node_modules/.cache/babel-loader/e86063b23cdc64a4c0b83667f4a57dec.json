{"ast":null,"code":"export class API {\n  constructor(id, path) {\n    this.mockedStatus = localStorage.getItem('mockedStatus');\n    this.apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n    this.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n    this.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n    this.datas = [];\n  }\n\n  async getDatas() {\n    const datas = await fetch(this.url, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => response.json()).then(data => {\n      this.datas.push(data.data, {\n        loading: false,\n        error: false,\n        errorMessage: ''\n      });\n      return this.data;\n    }).catch(error => {\n      this.datas.push({\n        loading: false,\n        error: true,\n        errorMessage: error\n      });\n      return this.data;\n    });\n    return datas; // this.datas = [];\n    // if (!this.url) return;\n    // this.loading = true;\n    // const fetchData = async () => {\n    // \ttry {\n    // \t\tconst response = await fetch(this.url);\n    // \t\tconst json = await response.json();\n    // \t\tlet datas = json.data;\n    // \t\tthis.loading = false;\n    // \t\tthis.error = false;\n    // \t\tthis.errorMessage = '';\n    // \t\tthis.datas.push(datas);\n    // \t} catch (error) {\n    // \t\tthis.error = true;\n    // \t\tthis.errorMessage = error;\n    // \t} finally {\n    // \t\tthis.loading = false;\n    // \t}\n    // };\n    // fetchData();\n    // return [this.datas, { loading: this.loading }, { error: this.error }, { errorMessage: this.errorMessage }];\n  }\n\n}","map":{"version":3,"names":["API","constructor","id","path","mockedStatus","localStorage","getItem","apiUrl","undefined","mockedUrl","url","datas","getDatas","fetch","method","headers","then","response","json","data","push","loading","error","errorMessage","catch"],"sources":["/Users/sebastien/Sebbe's Cloud/School/OpenClassRooms/2 - OCR - Software Developper - JS & React/Projet 12 (60h)/P12 - Mission/00Code/frontend/src/API/api.js"],"sourcesContent":["export class API {\n\tconstructor(id, path) {\n\t\tthis.mockedStatus = localStorage.getItem('mockedStatus');\n\t\tthis.apiUrl =\n\t\t\tpath === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n\t\tthis.mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n\t\tthis.url = this.mockedStatus === 'true' ? this.mockedUrl : this.apiUrl;\n\t\tthis.datas = [];\n\t}\n\n\tasync getDatas() {\n\t\tconst datas = await fetch(this.url, {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\tthis.datas.push(data.data, { loading: false, error: false, errorMessage: '' });\n\t\t\t\treturn this.data;\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tthis.datas.push({ loading: false, error: true, errorMessage: error });\n\t\t\t\treturn this.data;\n\t\t\t});\n\n\t\treturn datas;\n\n\t\t// this.datas = [];\n\n\t\t// if (!this.url) return;\n\n\t\t// this.loading = true;\n\n\t\t// const fetchData = async () => {\n\t\t// \ttry {\n\t\t// \t\tconst response = await fetch(this.url);\n\t\t// \t\tconst json = await response.json();\n\t\t// \t\tlet datas = json.data;\n\t\t// \t\tthis.loading = false;\n\t\t// \t\tthis.error = false;\n\t\t// \t\tthis.errorMessage = '';\n\t\t// \t\tthis.datas.push(datas);\n\t\t// \t} catch (error) {\n\t\t// \t\tthis.error = true;\n\t\t// \t\tthis.errorMessage = error;\n\t\t// \t} finally {\n\t\t// \t\tthis.loading = false;\n\t\t// \t}\n\t\t// };\n\t\t// fetchData();\n\t\t// return [this.datas, { loading: this.loading }, { error: this.error }, { errorMessage: this.errorMessage }];\n\t}\n}\n"],"mappings":"AAAA,OAAO,MAAMA,GAAN,CAAU;EAChBC,WAAW,CAACC,EAAD,EAAKC,IAAL,EAAW;IACrB,KAAKC,YAAL,GAAoBC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAApB;IACA,KAAKC,MAAL,GACCJ,IAAI,KAAKK,SAAT,GAAsB,8BAA6BN,EAAG,EAAtD,GAA2D,8BAA6BA,EAAG,IAAGC,IAAK,EADpG;IAEA,KAAKM,SAAL,GAAiBN,IAAI,KAAKK,SAAT,GAAsB,cAAaN,EAAG,aAAtC,GAAsD,cAAaA,EAAG,IAAGC,IAAK,aAA/F;IACA,KAAKO,GAAL,GAAW,KAAKN,YAAL,KAAsB,MAAtB,GAA+B,KAAKK,SAApC,GAAgD,KAAKF,MAAhE;IACA,KAAKI,KAAL,GAAa,EAAb;EACA;;EAEa,MAARC,QAAQ,GAAG;IAChB,MAAMD,KAAK,GAAG,MAAME,KAAK,CAAC,KAAKH,GAAN,EAAW;MACnCI,MAAM,EAAE,KAD2B;MAEnCC,OAAO,EAAE;QACR,gBAAgB;MADR;IAF0B,CAAX,CAAL,CAMlBC,IANkB,CAMZC,QAAD,IAAcA,QAAQ,CAACC,IAAT,EAND,EAOlBF,IAPkB,CAOZG,IAAD,IAAU;MACf,KAAKR,KAAL,CAAWS,IAAX,CAAgBD,IAAI,CAACA,IAArB,EAA2B;QAAEE,OAAO,EAAE,KAAX;QAAkBC,KAAK,EAAE,KAAzB;QAAgCC,YAAY,EAAE;MAA9C,CAA3B;MACA,OAAO,KAAKJ,IAAZ;IACA,CAVkB,EAWlBK,KAXkB,CAWXF,KAAD,IAAW;MACjB,KAAKX,KAAL,CAAWS,IAAX,CAAgB;QAAEC,OAAO,EAAE,KAAX;QAAkBC,KAAK,EAAE,IAAzB;QAA+BC,YAAY,EAAED;MAA7C,CAAhB;MACA,OAAO,KAAKH,IAAZ;IACA,CAdkB,CAApB;IAgBA,OAAOR,KAAP,CAjBgB,CAmBhB;IAEA;IAEA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;AArDe"},"metadata":{},"sourceType":"module"}