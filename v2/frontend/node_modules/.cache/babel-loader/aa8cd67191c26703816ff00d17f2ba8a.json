{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\n/**\n * Personalized hook to fetch data from the API\n *\n * @param {number} id user id\n * @param {string} path specific path to fetch data {optional}\n * @returns {object} data, isError, loading, errorMessage\n */\n\nconst useFetch = (id, path) => {\n  _s();\n\n  // get the state to define if we call the API or not\n  const mockedStatus = localStorage.getItem('mockedDatas'); // Define the url to fetch when we are not in api mode\n\n  const apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`; // Define the url to fetch when we are in mocked mode\n\n  const mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`; // Define the url to fetch based on the mocked status\n\n  const url = mockedStatus === 'true' ? mockedUrl : apiUrl;\n  const [data, setData] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [{\n    isError,\n    errorMessage\n  }, setError] = useState({\n    isError: false,\n    errorMessage: ''\n  });\n  useEffect(() => {\n    if (!url) return;\n    setLoading(true);\n\n    const fetchData = async () => {\n      try {\n        const response = await fetch(url, {\n          method: 'GET',\n          headers: {\n            'Content-Type': 'application/json',\n            Accept: 'application/json'\n          }\n        });\n        const data = await response.json();\n        setData(data.data);\n      } catch (error) {\n        setError({\n          isError: true,\n          errorMessage: error.message\n        });\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [url]);\n  return {\n    data,\n    loading,\n    isError,\n    errorMessage\n  };\n};\n\n_s(useFetch, \"MGZV2CvCiOs61x36kbXMoI7o9Lg=\");\n\nexport default useFetch;","map":{"version":3,"names":["useState","useEffect","useFetch","id","path","mockedStatus","localStorage","getItem","apiUrl","undefined","mockedUrl","url","data","setData","loading","setLoading","isError","errorMessage","setError","fetchData","response","fetch","method","headers","Accept","json","error","message"],"sources":["/Users/sebastien/Sebbe's Cloud/School/OpenClassRooms/2 - OCR - Software Developper - JS & React/Projet 12 (60h)/P12 - Mission/0Code/frontend/src/utils/hooks/hook.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\n/**\n * Personalized hook to fetch data from the API\n *\n * @param {number} id user id\n * @param {string} path specific path to fetch data {optional}\n * @returns {object} data, isError, loading, errorMessage\n */\nconst useFetch = (id, path) => {\n\t// get the state to define if we call the API or not\n\tconst mockedStatus = localStorage.getItem('mockedDatas');\n\n\t// Define the url to fetch when we are not in api mode\n\tconst apiUrl = path === undefined ? `http://localhost:8080/user/${id}` : `http://localhost:8080/user/${id}/${path}`;\n\n\t// Define the url to fetch when we are in mocked mode\n\tconst mockedUrl = path === undefined ? `../../data/${id}/datas.json` : `../../data/${id}/${path}/datas.json`;\n\n\t// Define the url to fetch based on the mocked status\n\tconst url = mockedStatus === 'true' ? mockedUrl : apiUrl;\n\n\tconst [data, setData] = useState({});\n\tconst [loading, setLoading] = useState(true);\n\tconst [{ isError, errorMessage }, setError] = useState({ isError: false, errorMessage: '' });\n\n\tuseEffect(() => {\n\t\tif (!url) return;\n\n\t\tsetLoading(true);\n\n\t\tconst fetchData = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(url, {\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\tAccept: 'application/json',\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tconst data = await response.json();\n\t\t\t\tsetData(data.data);\n\t\t\t} catch (error) {\n\t\t\t\tsetError({ isError: true, errorMessage: error.message });\n\t\t\t} finally {\n\t\t\t\tsetLoading(false);\n\t\t\t}\n\t\t};\n\t\tfetchData();\n\t}, [url]);\n\n\treturn { data, loading, isError, errorMessage };\n};\n\nexport default useFetch;\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMC,QAAQ,GAAG,CAACC,EAAD,EAAKC,IAAL,KAAc;EAAA;;EAC9B;EACA,MAAMC,YAAY,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAArB,CAF8B,CAI9B;;EACA,MAAMC,MAAM,GAAGJ,IAAI,KAAKK,SAAT,GAAsB,8BAA6BN,EAAG,EAAtD,GAA2D,8BAA6BA,EAAG,IAAGC,IAAK,EAAlH,CAL8B,CAO9B;;EACA,MAAMM,SAAS,GAAGN,IAAI,KAAKK,SAAT,GAAsB,cAAaN,EAAG,aAAtC,GAAsD,cAAaA,EAAG,IAAGC,IAAK,aAAhG,CAR8B,CAU9B;;EACA,MAAMO,GAAG,GAAGN,YAAY,KAAK,MAAjB,GAA0BK,SAA1B,GAAsCF,MAAlD;EAEA,MAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;EACA,MAAM,CAAC;IAAEgB,OAAF;IAAWC;EAAX,CAAD,EAA4BC,QAA5B,IAAwClB,QAAQ,CAAC;IAAEgB,OAAO,EAAE,KAAX;IAAkBC,YAAY,EAAE;EAAhC,CAAD,CAAtD;EAEAhB,SAAS,CAAC,MAAM;IACf,IAAI,CAACU,GAAL,EAAU;IAEVI,UAAU,CAAC,IAAD,CAAV;;IAEA,MAAMI,SAAS,GAAG,YAAY;MAC7B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACV,GAAD,EAAM;UACjCW,MAAM,EAAE,KADyB;UAEjCC,OAAO,EAAE;YACR,gBAAgB,kBADR;YAERC,MAAM,EAAE;UAFA;QAFwB,CAAN,CAA5B;QAOA,MAAMZ,IAAI,GAAG,MAAMQ,QAAQ,CAACK,IAAT,EAAnB;QACAZ,OAAO,CAACD,IAAI,CAACA,IAAN,CAAP;MACA,CAVD,CAUE,OAAOc,KAAP,EAAc;QACfR,QAAQ,CAAC;UAAEF,OAAO,EAAE,IAAX;UAAiBC,YAAY,EAAES,KAAK,CAACC;QAArC,CAAD,CAAR;MACA,CAZD,SAYU;QACTZ,UAAU,CAAC,KAAD,CAAV;MACA;IACD,CAhBD;;IAiBAI,SAAS;EACT,CAvBQ,EAuBN,CAACR,GAAD,CAvBM,CAAT;EAyBA,OAAO;IAAEC,IAAF;IAAQE,OAAR;IAAiBE,OAAjB;IAA0BC;EAA1B,CAAP;AACA,CA3CD;;GAAMf,Q;;AA6CN,eAAeA,QAAf"},"metadata":{},"sourceType":"module"}